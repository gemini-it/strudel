---
title: Syntaxe de code
layout: ../../layouts/MainLayout.astro
---

import { MiniRepl } from '../../docs/MiniRepl';
import { JsDoc } from '../../docs/JsDoc';

# Syntaxe de code

Revenons en arrière et comprenons comment la syntaxe fonctionne dans Strudel.

Jetez un œil à cet exemple simple :

<MiniRepl client:idle tune={`note("c a f e").s("piano")`} />

- Nous avons le mot `note` qui est suivi de parenthèses `()` avec des mots/lettres/chiffres à l'intérieur, entourés de guillemets `"c a f e"`
- Ensuite, nous avons un point `.` suivi d'un autre morceau de code similaire `s("piano")`.
- Nous pouvons également voir que ces textes sont _mis en évidence_ avec des couleurs : le mot `note` est violet, les parenthèses `()` sont grises, et le contenu à l'intérieur des `""` est vert. (Les couleurs pourraient être différentes si vous avez changé le thème par défaut)

Que se passe-t-il si nous essayons de « casser » ce modèle de différentes manières ?

<MiniRepl client:idle tune={`note(c a f e).s(piano)`} />

<MiniRepl client:idle tune={`note("c a f e")s("piano")`} />

<MiniRepl client:idle tune={`note["c a f e"].s{"piano"}`} />

Ok, aucun de ceux-ci ne semble fonctionner…

<MiniRepl client:idle tune={`s("piano").note("c a f e")`} />

Celui-ci fonctionne, mais maintenant nous n'entendons que la première note…

Alors, que se passe-t-il ici ?

# Fonctions, arguments et chaînage

Jusqu'à présent, nous avons vu la syntaxe suivante :

```
xxx("foo").yyy("bar")
```

En général, `xxx` et `yyy` sont appelées [_fonctions_](<https://en.wikipedia.org/wiki/Function_(computer_programming)>), tandis que `foo` et `bar` sont appelés [_arguments_ ou _paramètres_](<https://en.wikipedia.org/wiki/Parameter_(computer_programming)>) de fonction.
Jusqu'à présent, nous avons utilisé les fonctions pour déclarer quel aspect du son nous voulons contrôler, et leurs arguments pour les données réelles.
La fonction `yyy` est appelée une fonction de [_chaînage de méthodes_](https://en.wikipedia.org/wiki/Method_chaining), car elle est précédée d'un point (`.`).

En général, l'idée du chaînage est que du code tel que `a("this").b("that").c("other")` permet aux fonctions `a`, `b` et `c` de se produire dans un ordre spécifié, sans avoir besoin de les écrire sur trois lignes de code séparées.
Vous pouvez considérer cela comme similaire au chaînage d'effets audio ensemble en utilisant des pédales de guitare ou des effets audio numériques.

Strudel utilise massivement le chaînage de méthodes. Voici un exemple plus sophistiqué :

<MiniRepl
  client:idle
  tune={`note("a3 c#4 e4 a4")
.s("sawtooth")
.cutoff(500)
//.delay(0.5)
.room(0.5)`}
/>

## Écrivez votre propre fonction chaînée

Vous pouvez écrire votre propre fonction chaînée en utilisant `register`. Voici la chaîne ci-dessus enregistrée comme une fonction chaînée réutilisable.

<MiniRepl
  client:idle
  tune={`const effectChain = register('effectChain', (pat) => pat
    .s("sawtooth")
    .cutoff(500)
    //.delay(0.5)
    .room(0.5)
  )
note("a3 c#4 e4 a4").effectChain()`}
/>

Essayez d'ajouter `.rev()` après `effectChain()` pour entendre d'autres effets ajoutés.

# Commentaires

Le `//` dans l'exemple ci-dessus est un commentaire de ligne, ce qui signifie que la fonction `delay` est ignorée.
C'est un moyen pratique d'activer et de désactiver rapidement le code.
Essayez de décommenter cette ligne en supprimant `//` et en rafraîchissant le motif.
Vous pouvez également utiliser le raccourci clavier `cmd-/` pour activer et désactiver les commentaires.

Vous avez peut-être remarqué que certains commentaires dans les exemples REPL incluent des mots commençant par un "@", comme `@by` ou `@license`.
Ce ne sont qu'une convention pour définir des informations sur la musique. Nous en parlerons dans la section [Métadonnées musicales](/learn/metadata).

# Chaînes de caractères

Ok, et qu'en est-il du contenu à l'intérieur des guillemets (par exemple `"c a f e"`) ?
En JavaScript, comme dans la plupart des langages de programmation, ce contenu est appelé une [_chaîne de caractères_](<https://en.wikipedia.org/wiki/String_(computer_science)>).
Une chaîne est simplement une séquence de caractères individuels.
Dans TidalCycles, les chaînes entre guillemets doubles sont utilisées pour écrire des _motifs_ en utilisant la mini-notation, et vous pourriez entendre l'expression _chaîne de motif_ de temps en temps.
Si vous voulez créer une chaîne normale et non un motif, vous pouvez utiliser des guillemets simples, par exemple `'C minor'` ne sera pas analysé comme de la mini-notation.

La bonne nouvelle, c'est que cela couvre la majeure partie de la syntaxe JavaScript nécessaire pour Strudel !

<br />
