---
title: Effets audio
layout: ../../layouts/MainLayout.astro
---

import { MiniRepl } from '../../docs/MiniRepl';
import { JsDoc } from '../../docs/JsDoc';

# Effets audio

Que vous utilisiez un synthé ou un échantillon, vous pouvez appliquer l'un des effets audio intégrés suivants.
Comme vous pouvez vous en douter, les effets peuvent être chaînés ensemble, et ils acceptent une chaîne de motifs comme argument.

# Chaîne de signal

<img src="/img/strudel-signal-flow.png"></img>

La chaîne de signal dans Strudel est la suivante :

- Un événement générateur de son est déclenché par un motif
  - Cela a une heure de début et une durée, qui est généralement
    contrôlée par la longueur de la note et les paramètres ADSR
  - Si nous dépassons la polyphonie maximale, les anciens sons commencent à s'éteindre
  - Les sons muets (ceux dont la valeur `s` est `-`, `~`, ou `_`) sont ignorés
- Un son est produit (à travers, disons, un échantillon ou un oscillateur)
  - C'est là que les effets basés sur le désaccordage (comme `detune`, `penv`, etc. se produisent)
- Ce qui suit se produira _dans l'ordre_ et seulement s'ils ont été appelés dans le motif. Notez que tous ces
  effets à usage unique, ce qui signifie que plusieurs occurrences d'entre eux dans un motif remplaceront simplement les valeurs
  (par exemple, vous ne pouvez pas faire `s("bd").lpf(100).distort(2).lpf(800)` pour filtre passe-bas, distordre, puis filtre passe-bas
  à nouveau)
  - Vocodeur de phase (`stretch`)
  - Le gain est appliqué (`gain`)
    - C'est là que se produit le principal ADSR (volume)
  - Un filtre passe-bas (`lpf`)
  - Un filtre passe-haut (`hpf`)
  - Un filtre passe-bande (`bandpass`)
  - Un filtre de voyelle (`vowel`)
  - Réduction du taux d'échantillonnage (`coarse`)
  - Réduction de bits (`crush`)
  - Distorsion de forme d'onde (`shape`)
  - Distorsion normale (`distort`)
  - Tremolo (`tremolo`)
  - Compresseur (`compressor`)
  - Panoramique (`pan`)
  - Phaser (`phaser`)
  - Postgain (`post`)
- Le son est ensuite divisé en plusieurs destinations
  - Sortie sèche (quantité contrôlée par le paramètre `dry`)
  - Les envois
    - Analyseurs
      - Ceux-ci sont utilisés pour l'outillage comme `scope` et `spectrum` et leur configuration se fait généralement en coulisses
    - Delay (quantité contrôlée par le paramètre `delay`)
    - Reverb (quantité contrôlée par le paramètre `room`)
- La sortie sèche, le délai et la réverbération sont joints dans ce qu'on appelle l'"orbite" du motif (voir plus dans la section ci-dessous)
  - L'effet `duck` affecte le volume de tous les signaux dans l'orbite
  - L'orbite est ensuite envoyée au mixeur

## Orbites

Les orbites sont la façon dont les sorties sont gérées dans Strudel. Elles prescrivent également quel délai et quelle réverbération associer au signal sec.
Par défaut, toutes les orbites sont mixées vers les canaux `1` et `2` en stéréo, cependant avec le paramètre "Orbites multi-canaux"
(sous Paramètres à droite) vous pouvez les utiliser comme sorties stéréo individuelles à 2 canaux (l'orbite `i` sera mappée vers
les canaux `2i` et `2i + 1`). Vous pouvez ensuite utiliser des routeurs comme Blackhole 16 pour récupérer et enregistrer tous les canaux dans un DAW pour un traitement ultérieur.

L'orbite par défaut est `1` et elle est définie avec `orbit`. Vous pouvez envoyer un son vers plusieurs orbites via la mini-notation

<MiniRepl client:visible tune={`s("white").orbit("2,3,4").gain(0.2)`} />

mais soyez prudent car cela créera trois copies du son en coulisses, ce qui signifie que s'ils sont mixés
vers une seule sortie, ils tripleront le volume. Nous avons réduit le gain ici pour préserver vos oreilles.

⚠️ Il n'y a qu'un seul délai et réverbération par orbite, alors soyez conscient que si vous tentez de changer les paramètres sur deux
motifs pointant vers la même orbite, cela peut conduire à des résultats imprévisibles. Comparez, par exemple, ce joli pluck
avec une grande réverbération :

<MiniRepl
  client:visible
  tune={`
$: s("triangle*4").decay(0.5).n(irand(12)).scale('C minor')
  .room(1).roomsize(10)`}
/>

versus le même pluck avec une grosse caisse muette entrant et écrasant la valeur `roomsize` :

<MiniRepl
  client:visible
  tune={`
$: s("triangle*4").decay(0.5).n(irand(12)).scale('C minor')
  .room(1).roomsize(10)

$: s("bd\*4").room(0.01).roomsize(0.01).postgain(0)`}
/>

Cela est dû au fait qu'ils partagent la même orbite : la valeur par défaut de `1`. Cela peut être corrigé simplement en mettant à jour les orbites pour qu'elles soient
distinctes :

<MiniRepl
  client:visible
  tune={`
$: s("triangle*4").decay(0.5).n(irand(12)).scale('C minor')
  .room(1).roomsize(10).orbit(2)

$: s("bd\*4").room(0.01).roomsize(0.01).postgain(0)`}
/>

## Changements continus

Comme tout ce qui précède est déclenché par un _son se produisant_, il arrive souvent que les paramètres ne puissent pas être
modifiés de manière continue dans le temps. Par exemple,

<MiniRepl
  client:visible
  tune={`
s("supersaw").lpf(tri.range(100, 5000).slow(2))`}
/>

Ne produira pas un filtre passe-bas continuellement modulé par LFO en raison du `tri` n'étant échantillonné que chaque fois que la note frappe
(dans ce cas, la valeur par défaut d'une fois par cycle). Vous pouvez le simuler en introduisant plus d'événements générateurs de son, par exemple :

<MiniRepl
  client:visible
  tune={`
s("supersaw").seg(16).lpf(tri.range(100, 5000).slow(2))`}
/>

Certains paramètres _induisent_ des variations continues dans le temps, cependant :

- La courbe ADSR (gouvernée par `attack`, `sustain`, `decay`, `release`)
- La courbe d'enveloppe de hauteur (gouvernée par `penv` et son ADSR associé)
- La courbe FM (`fmenv`)
- Les enveloppes de filtre (`lpenv`, `hpenv`, `bpenv`)
- Tremolo (`tremolo`)
- Phaser (`phaser`)
- Vibrato (`vib`)
- Ducking (`duckorbit`)

# Filtres

Les filtres sont un élément constitutif essentiel de la [synthèse soustractive](https://en.wikipedia.org/wiki/Subtractive_synthesis).
Strudel est livré avec 3 types de filtres :

- filtre passe-bas : les basses fréquences peuvent _passer_, les hautes fréquences sont coupées
- filtre passe-haut : les hautes fréquences peuvent _passer_, les basses fréquences sont coupées
- filtres passe-bande : seule une bande de fréquence peut _passer_, les basses et hautes fréquences autour sont coupées

Chaque filtre a 2 paramètres :

- coupure : la fréquence à laquelle le filtre commence à fonctionner. par exemple, un filtre passe-bas avec une coupure de 1000Hz permet aux fréquences inférieures à 1000Hz de passer.
- valeur Q : Contrôle la résonance du filtre. Des valeurs plus élevées sonnent plus agressives. Voir aussi [Facteur Q](https://en.wikipedia.org/wiki/Q_factor)

## lpf

<JsDoc client:idle name="lpf" h={0} />

## lpq

<JsDoc client:idle name="lpq" h={0} />

## hpf

<JsDoc client:idle name="hpf" h={0} />

## hpq

<JsDoc client:idle name="hpq" h={0} />

## bpf

<JsDoc client:idle name="bpf" h={0} />

## bpq

<JsDoc client:idle name="bpq" h={0} />

## ftype

<JsDoc client:idle name="ftype" h={0} />

## vowel

<JsDoc client:idle name="vowel" h={0} />

# Modulation d'amplitude

La modulation d'amplitude change l'amplitude (gain) périodiquement au fil du temps.

## am

<JsDoc client:idle name="am" h={0} />

## tremolosync

<JsDoc client:idle name="tremolosync" h={0} />

## tremolodepth

<JsDoc client:idle name="tremolodepth" h={0} />

## tremoloskew

<JsDoc client:idle name="tremoloskew" h={0} />

## tremolophase

<JsDoc client:idle name="tremolophase" h={0} />

## tremoloshape

<JsDoc client:idle name="tremoloshape" h={0} />

# Enveloppe d'amplitude

L'[enveloppe](<https://en.wikipedia.org/wiki/Envelope_(music)>) d'amplitude contrôle le contour dynamique d'un son.
Strudel utilise des enveloppes ADSR, qui sont probablement le moyen le plus courant de décrire une enveloppe.

![ADSR](https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/ADSR_parameter.svg/1920px-ADSR_parameter.svg.png)

[lien image](https://commons.wikimedia.org/wiki/File:ADSR_parameter.svg)

## attack

<JsDoc client:idle name="attack" h={0} />

## decay

<JsDoc client:idle name="decay" h={0} />

## sustain

<JsDoc client:idle name="sustain" h={0} />

## release

<JsDoc client:idle name="release" h={0} />

## adsr

<JsDoc client:idle name="adsr" h={0} />

# Enveloppe de filtre

Chaque filtre peut recevoir une enveloppe de filtre supplémentaire contrôlant dynamiquement la valeur de coupure. Il utilise une enveloppe ADSR similaire à celle utilisée pour l'amplitude. Il y a un paramètre supplémentaire pour contrôler la profondeur de la modulation du filtre : `lpenv`|`hpenv`|`bpenv`. Cela vous permet de jouer des modulations de filtre subtiles ou énormes de la même manière en augmentant ou diminuant simplement la profondeur.

<MiniRepl
  client:idle
  tune={`note("[c eb g <f bb>](3,8,<0 1>)".sub(12))
  .s("<sawtooth>/64")
  .lpf(sine.range(300,2000).slow(16))
  .lpa(0.005)
  .lpd(perlin.range(.02,.2))
  .lps(perlin.range(0,.5).slow(3))
  .lpq(sine.range(2,10).slow(32))
  .release(.5)
  .lpenv(perlin.range(1,8).slow(2))
  .ftype('24db')
  .room(1)
  .juxBy(.5,rev)
  .sometimes(add(note(12)))
  .stack(s("bd*2").bank('RolandTR909'))
  .gain(.5).fast(2)`}
/>

Il y a une enveloppe de filtre pour chaque type de filtre et donc un ensemble de paramètres d'enveloppe de filtre précédés soit par `lp`, `hp` ou `bp` :

- `lpattack`, `lpdecay`, `lpsustain`, `lprelease`, `lpenv` : enveloppe de filtre pour le filtre passe-bas.
  - alternativement : `lpa`, `lpd`, `lps`, `lpr` et `lpe`.
- `hpattack`, `hpdecay`, `hpsustain`, `hprelease`, `hpenv` : enveloppe de filtre pour le filtre passe-haut.
  - alternativement : `hpa`, `hpd`, `hps`, `hpr` et `hpe`.
- `bpattack`, `bpdecay`, `bpsustain`, `bprelease`, `bpenv` : enveloppe de filtre pour le filtre passe-bande.
  - alternativement : `bpa`, `bpd`, `bps`, `bpr` et `bpe`.

## lpattack

<JsDoc client:idle name="lpattack" h={0} />

## lpdecay

<JsDoc client:idle name="lpdecay" h={0} />

## lpsustain

<JsDoc client:idle name="lpsustain" h={0} />

## lprelease

<JsDoc client:idle name="lprelease" h={0} />

## lpenv

<JsDoc client:idle name="lpenv" h={0} />

# Enveloppe de hauteur

Vous pouvez également contrôler la hauteur avec des enveloppes !
Les enveloppes de hauteur peuvent insuffler de la vie dans des sons statiques :

<MiniRepl
  client:idle
  tune={`n("<-4,0 5 2 1>*<2!3 4>")
  .scale("<C F>/8:pentatonic")
  .s("gm_electric_guitar_jazz")
  .penv("<.5 0 7 -2>*2").vib("4:.1")
  .phaser(2).delay(.25).room(.3)
  .size(4).fast(1.5)`}
/>

Vous pouvez également créer de jolis sons de style chiptune :

<MiniRepl
  client:idle
  tune={`n(run("<4 8>/16")).jux(rev)
.chord("<C^7 <Db^7 Fm7>>")
.dict('ireal')
.voicing().add(note("<0 1>/8"))
.dec(.1).room(.2)
.segment("<4 [2 8]>")
.penv("<0 <2 -2>>").patt(.02).fast(2)`}
/>

Décomposons tous les contrôles d'enveloppe de hauteur :

## pattack

<JsDoc client:idle name="pattack" h={0} />

## pdecay

<JsDoc client:idle name="pdecay" h={0} />

## prelease

<JsDoc client:idle name="prelease" h={0} />

## penv

<JsDoc client:idle name="penv" h={0} />

## pcurve

<JsDoc client:idle name="pcurve" h={0} />

## panchor

<JsDoc client:idle name="panchor" h={0} />

# Dynamique

## gain

<JsDoc client:idle name="gain" h={0} />

## velocity

<JsDoc client:idle name="velocity" h={0} />

## compressor

<JsDoc client:idle name="compressor" h={0} />

## postgain

<JsDoc client:idle name="postgain" h={0} />

## xfade

<JsDoc client:idle name="xfade" h={0} />

# Panoramique

## jux

<JsDoc client:idle name="jux" h={0} />

## juxBy

<JsDoc client:idle name="juxBy" h={0} />

## pan

<JsDoc client:idle name="pan" h={0} />

# Mise en forme d'onde

## coarse

<JsDoc client:idle name="coarse" h={0} />

## crush

<JsDoc client:idle name="crush" h={0} />

## distort

<JsDoc client:idle name="distort" h={0} />

# Effets globaux

## Effets locaux vs globaux

Alors que les effets « locaux » listés ci-dessus créeront toujours une chaîne d'effets séparée pour chaque événement,
les effets globaux utilisent la même chaîne pour tous les événements de la même orbite :

## orbit

<JsDoc client:idle name="orbit" h={0} />

## Délai

### delay

<JsDoc client:idle name="delay" h={0} />

### delaytime

<JsDoc client:idle name="delaytime" h={0} />

### delayfeedback

<JsDoc client:idle name="delayfeedback" h={0} />

## Réverbération

### room

<JsDoc client:idle name="room" h={0} />

### roomsize

<JsDoc client:idle name="roomsize" h={0} />

### roomfade

<JsDoc client:idle name="roomfade" h={0} />

### roomlp

<JsDoc client:idle name="roomlp" h={0} />

### roomdim

<JsDoc client:idle name="roomdim" h={0} />

### iresponse

<JsDoc client:idle name="iresponse" h={0} />

## Phaser

### phaser

<JsDoc client:idle name="phaser" h={0} />

### phaserdepth

<JsDoc client:idle name="phaserdepth" h={0} />

### phasercenter

<JsDoc client:idle name="phasercenter" h={0} />

### phasersweep

<JsDoc client:idle name="phasersweep" h={0} />

## Duck

### duckorbit

<JsDoc client:idle name="duckorbit" h={0} />

### duckattack

<JsDoc client:idle name="duckattack" h={0} />

### duckdepth

<JsDoc client:idle name="duckdepth" h={0} />

Ensuite, nous examinerons l'entrée/sortie via [MIDI, OSC et autres méthodes](/learn/input-output).
