---
title: Patternisation par pas
layout: ../../layouts/MainLayout.astro
---

import { MiniRepl } from '../../docs/MiniRepl';
import { JsDoc } from '../../docs/JsDoc';

# Patternisation par pas (expérimental)

Il s'agit d'un domaine en développement de Strudel, et le comportement pourrait changer ou être renommé dans les versions futures. Les retours et idées sont les bienvenus !

## Introduction

Habituellement dans Strudel, le seul point de référence pour la plupart des transformations de pattern est le _cycle_. Il est maintenant possible de travailler également avec des _pas_, via une gamme croissante de fonctions.

Par exemple, habituellement lorsque vous `fastcat` deux patterns ensemble, les cycles seront compressés en un demi-cycle chacun :

<MiniRepl client:idle tune={`fastcat("bd hh hh", "bd hh hh cp hh").sound()`} />

Avec la nouvelle fonction stepwise `stepcat`, les pas des deux patterns seront répartis uniformément sur le cycle :

<MiniRepl client:idle tune={`stepcat("bd hh hh", "bd hh hh cp hh").sound()`} />

Par défaut, les pas sont comptés selon le 'niveau supérieur' dans la mini-notation. Par exemple `"a [b c] d e"` a cinq événements en un cycle, mais est compté comme quatre pas, où `[b c]` est compté comme un seul pas.

Cependant, vous pouvez marquer un niveau métrique différent pour compter les pas relativement, en utilisant un `^` au début d'un sous-pattern. Si nous faisons cela au sous-pattern dans notre exemple : `"a [^b c] d e"`, alors le pattern est maintenant compté comme ayant _huit_ pas. C'est parce que 'b' et 'c' sont chacun comptés comme des pas simples, et les événements dans le pattern sont deux fois plus longs, et sont donc comptés comme deux pas chacun.

## Rythmer les pas

Certaines fonctions stepwise ne semblent pas faire grand-chose par elles-mêmes, par exemple ces deux exemples de la fonction `expand` sonnent exactement pareil malgré être étendus de différentes quantités :

<MiniRepl client:idle tune={`"c a f e".expand(2).note().sound("folkharp")`} />

<MiniRepl client:idle tune={`"c a f e".expand(4).note().sound("folkharp")`} />

Le nombre de pas par cycle est modifié en coulisses, mais seul, cela ne fait rien. Vous entendrez une différence cependant, une fois que vous utilisez une autre fonction stepwise avec elle, par exemple `stepcat` :

<MiniRepl
  client:idle
  tune={`stepcat("c a f e".expand(2), "g d").note()
  .sound("folkharp")`}
/>

<MiniRepl
  client:idle
  tune={`stepcat("c a f e".expand(4), "g d").note()
  .sound("folkharp")`}
/>

Vous devriez pouvoir entendre que `expand` augmente la durée des pas du premier sous-pattern, proportionnellement au second.

Vous pouvez également changer la vitesse d'un pattern pour correspondre à un nombre donné de pas par cycle, avec la fonction `pace` :

<MiniRepl
  client:idle
  tune={`stepcat("c a f e".expand(2), "g d").note()
  .sound("folkharp")
  .pace(8)`}
/>

<MiniRepl
  client:idle
  tune={`stepcat("c a f e".expand(4), "g d").note()
  .sound("folkharp")
  .pace(8)`}
/>

Le premier exemple a dix pas, et le deuxième exemple a 18 pas, mais sont ensuite tous deux joués à une vitesse de 8 pas par cycle.

L'argument de `expand` peut également être patterné, et sera traité de manière stepwise. Cela signifie que les patterns provenant des valeurs changeantes dans l'argument seront `stepcat`és ensemble :

<MiniRepl client:idle tune={`note("c a f e").sound("folkharp").expand("3 2 1 1 2 3")`} />

Cela résulte en un pattern dense, car les différentes versions étendues sont compressées en un seul cycle. `pace` est à nouveau pratique ici pour ralentir le pattern à un nombre particulier de pas par cycle :

<MiniRepl client:idle tune={`note("c a f e").sound("folkharp").expand("3 2 1 1 2 3").pace(8)`} />

Les versions antérieures de nombreuses de ces fonctions avaient des préfixes `s_`, et la fonction `pace` était précédemment connue sous le nom de `steps`. Celles-ci existent toujours en tant qu'alias, mais peuvent avoir changé de comportement et seront bientôt supprimées. Veuillez mettre à jour vos patterns !

## Fonctions stepwise

### pace

<JsDoc client:idle name="pace" h={0} />

### stepcat

<JsDoc client:idle name="stepcat" h={0} />

### stepalt

<JsDoc client:idle name="stepalt" h={0} />

### expand

<JsDoc client:idle name="expand" h={0} />

### contract

<JsDoc client:idle name="contract" h={0} />

### extend

<JsDoc client:idle name="extend" h={0} />

### take

<JsDoc client:idle name="take" h={0} />

### drop

<JsDoc client:idle name="drop" h={0} />

### polymeter

<JsDoc client:idle name="polymeter" h={0} />

### shrink

<JsDoc client:idle name="shrink" h={0} />

### grow

<JsDoc client:idle name="grow" h={0} />

### tour

<JsDoc client:idle name="tour" h={0} />

### zip

<JsDoc client:idle name="zip" h={0} />
