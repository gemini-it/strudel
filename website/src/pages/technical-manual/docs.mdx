---
title: Documentation
layout: ../../layouts/MainLayout.astro
---

# Documentation

La page de documentation est construite sur le [site de documentation](https://github.com/withastro/astro/tree/main/examples/docs) d'Astro.

## Ajouter une nouvelle Page de Documentation

1. ajoutez un fichier `.mdx` dans un chemin sous `website/src/pages/`, par exemple [website/src/pages/learn/code.mdx](https://codeberg.org/uzu/strudel/src/branch/main/website/src/pages/learn/code.mdx) sera disponible sous https://strudel.cc/learn/code/ (ou localement sous `http://localhost:4321/learn/code/`)
2. assurez-vous de copier la partie supérieure d'une autre page de documentation existante. Ajustez le titre en conséquence
3. Pour ajouter un lien vers la barre latérale, ajoutez une nouvelle entrée à `SIDEBAR` dans [`config.ts`](https://codeberg.org/uzu/strudel/src/branch/main/website/src/config.ts)

## Utiliser le Mini REPL

Pour ajouter un Mini REPL, assurez-vous d'importer :

```js
import { MiniRepl } from '../../docs/MiniRepl';
```

ajoutez un mini repl avec

```jsx
<MiniRepl client:idle tune={`note("a3 c#4 e4 a4")`} />
```

- `client:idle` est requis pour dire à astro que le repl doit être interactif, voir [Directive Client](https://docs.astro.build/en/reference/directives-reference/#client-directives)
- `tune` : peut être n'importe quel code de pattern valide
- `punchcard` : si ajouté, une visualisation punchcard / pianoroll est rendue
- `drawTime` : fenêtre de temps pour le dessin, par défaut `[0, 4]`
- `canvasHeight` : hauteur du canvas, par défaut 100px

Voir `mini-notation.mdx` pour des exemples d'utilisation

## Documentation Dans le Code Source

Vous pouvez ajouter la documentation dans le code source pour une fonction en utilisant le composant `JsDoc`. Importez :

```js
import { JsDoc } from '../../docs/JsDoc';
```

Utilisation :

```jsx
<JsDoc client:idle name="bandf" h={0} />
```

- `name` : nom de la fonction, tel que nommé avec `@name` dans jsdoc
- `h` : niveau du titre. `0` cachera le titre. Le cacher permet d'utiliser un titre manuel ce qui résulte en un lien de navigation généré dans la barre latérale droite.
- `hideDescription` : si défini, la description sera cachée

### Écrire du jsdoc

La documentation est écrite avec des commentaires [jsdoc](https://jsdoc.app/). Exemple :

```js
/**
 * Sélectionner un son / sample par nom.
 *
 * @name s
 * @param {string | Pattern} sound Le son / pattern de sons à choisir
 * @example
 * s("bd hh")
 *
 */
// implémentation de la fonction s
```

- Avant chaque build, ces commentaires seront rendus dans `doc.json` en utilisant [jsdoc-json](https://www.npmjs.com/package/jsdoc-json) comme template
- Pour régénérer le fichier `doc.json` manuellement, exécutez `npm run jsdoc-json`
- Le fichier est utilisé par le composant `JsDoc` pour trouver la documentation par nom
- De plus, il est utilisé pour le test de snapshot `examples.test.mjs`

Comment Strudel fait-il ses [Tests](/technical-manual/testing) ?
